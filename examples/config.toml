# Sockrats Example Configuration
#
# This file shows all available configuration options.
# Copy this file and modify for your deployment.

[client]
# Remote rathole server address (required)
remote_addr = "server.example.com:2333"

# Service name - must match server configuration (required)
service_name = "socks5"

# Authentication token - must match server configuration (required)
token = "your-secret-token"

# Heartbeat timeout in seconds (default: 40)
heartbeat_timeout = 40

# Transport configuration
[client.transport]
# Transport type: "tcp" or "noise"
type = "noise"

# TCP transport options (applied to underlying TCP connection for all transport types)
[client.transport.tcp]
# Enable TCP_NODELAY for lower latency
nodelay = true
# TCP keepalive timeout in seconds
keepalive_secs = 20
# TCP keepalive interval in seconds
keepalive_interval = 8

# Noise protocol options (required when type = "noise")
[client.transport.noise]
# Noise protocol pattern (default: "Noise_NK_25519_ChaChaPoly_BLAKE2s")
pattern = "Noise_NK_25519_ChaChaPoly_BLAKE2s"
# Remote server's public key (base64 encoded, required)
remote_public_key = "base64-encoded-server-public-key"
# Local client private key (base64 encoded, optional for NK pattern)
# local_private_key = "base64-encoded-client-private-key"

# SOCKS5 server configuration
[client.socks]
# Require SOCKS5 client authentication (default: false)
auth_required = false

# Username for SOCKS5 authentication (if auth_required = true)
# username = "user"

# Password for SOCKS5 authentication (if auth_required = true)
# password = "pass"

# Allow UDP ASSOCIATE command (default: false)
allow_udp = false

# Resolve DNS on the client side (default: true)
# If false, domain names are passed to the target for resolution
dns_resolve = true

# Connection timeout for outbound connections in seconds (default: 10)
request_timeout = 10

# SSH server configuration (optional, requires --features ssh)
# Uncomment to enable embedded SSH server
# [client.ssh]
# enabled = true
#
# # Authentication methods: "password", "publickey"
# auth_methods = ["password", "publickey"]
#
# # Host key file (Ed25519 or RSA in OpenSSH format)
# host_key = "/path/to/host_key"
#
# # For password authentication:
# username = "admin"
# password = "secret"
#
# # For public key authentication:
# authorized_keys = "/path/to/authorized_keys"
#
# # Enable shell access (default: true)
# shell = true
#
# # Enable exec command (default: true)
# exec = true
#
# # Enable SFTP subsystem (default: false)
# sftp = false
#
# # Enable PTY allocation (default: true)
# pty = true
#
# # Enable TCP/IP forwarding (default: false)
# tcp_forwarding = false
#
# # Maximum authentication attempts (default: 6)
# max_auth_tries = 6
#
# # Connection timeout in seconds (default: 300)
# connection_timeout = 300

# WireGuard tunnel configuration (optional, requires --features wireguard)
# When enabled, transport type MUST be "tcp" (Noise is redundant with WG encryption)
# sockrats creates a WireGuard tunnel to the peer, then establishes virtual TCP
# connections to the rathole server through that tunnel.
# No TUN/TAP device is created — all processing is in userspace.
#
# [client.wireguard]
# enabled = true
# # WireGuard keys (base64 encoded, 32 bytes each)
# private_key = "YNqHbfBQKaGvlC4Hw0URzIhpHP/6dFzjPKMzMFBjllQ="
# peer_public_key = "UtMCkMvRMmBDDwwOSAmDUCBfpBJQzMJCbCR7cjY3V0s="
# # Optional preshared key for post-quantum resistance
# # preshared_key = "base64-encoded-preshared-key"
# # Real network endpoint of the WireGuard peer (UDP)
# peer_endpoint = "wg-gateway.example.com:51820"
# # Persistent keepalive in seconds (0 = disabled, default: 25)
# persistent_keepalive = 25
# # Client address in CIDR notation (like WireGuard [Interface] Address)
# address = "10.0.0.2/24"
# # Allowed IP ranges (CIDR notation)
# allowed_ips = ["10.0.0.0/24"]

# Connection pool configuration
[client.pool]
# Minimum number of pre-established TCP channels (default: 2)
min_tcp_channels = 2

# Maximum number of TCP channels (default: 10)
max_tcp_channels = 10

# Minimum number of pre-established UDP channels (default: 1)
min_udp_channels = 1

# Maximum number of UDP channels (default: 5)
max_udp_channels = 5

# Channel idle timeout in seconds (default: 300)
idle_timeout = 300

# Health check interval in seconds (default: 30)
health_check_interval = 30

# Maximum time to wait for a channel from the pool (default: 10)
acquire_timeout = 10

# ============================================================================
# Multi-Service Configuration (alternative to single-service mode above)
# ============================================================================
# Use this to configure multiple services (SOCKS5, SSH, VNC) on different
# rathole service names. Uncomment and configure as needed.
# Note: When using multi-service mode, the top-level service_name, token,
# socks, and ssh settings are ignored.
#
# [[client.services]]
# name = "socks5"
# service_type = "socks5"
# token = "socks-token"
# socks.auth_required = false
# socks.allow_udp = false
# socks.dns_resolve = true
# socks.request_timeout = 10
#
# [[client.services]]
# name = "ssh-tunnel"
# service_type = "ssh"
# token = "ssh-token"
# ssh.auth_methods = ["password"]
# ssh.host_key_path = "/path/to/host_key"
# ssh.username = "admin"
# ssh.password = "secret"
#
# [[client.services]]
# name = "vnc"
# service_type = "vncserver"
# token = "vnc-token"
# vnc.enabled = true
# # Framebuffer resolution — this IS the virtual screen resolution
# # that VNC viewers will see. (default: 1024x768, max: 8192x8192)
# vnc.width = 1920
# vnc.height = 1080
# # Desktop name shown in VNC viewer title bar (default: "Sockrats VNC")
# vnc.desktop_name = "Remote Desktop"
# # VNC authentication password; omit for no authentication
# vnc.password = "vnc-secret"
# # JPEG quality for Tight encoding, 0-100 (default: 80)
# vnc.jpeg_quality = 80
# # Zlib compression level, 0-9 (default: 6)
# vnc.compression_level = 6
# # Maximum framebuffer update rate (default: 30)
# vnc.max_fps = 30
